#!/usr/bin/env -S mycmd
# -*- mode: shell-script; sh-shell: bash; sh-basic-offset: 4; sh-indentation: 4; coding: utf-8 -*-
# shellcheck shell=bash

set -o nounset -o errexit -o errtrace -o pipefail

function mycmd.main() {
    if ! project.load_closest_project_file; then
        exit 1
    fi

    # shellcheck disable=SC2154
    mycmd.output "Using project file: ${MYPROJECT_PROJECT_FILE}."

    if (($# < 1)); then
        mycmd.err_exit 1 "Missing task to run."
    fi

    local exit_code=0

    project.execute_task "${@}" || exit_code=$?

    exit "${exit_code}"
}
